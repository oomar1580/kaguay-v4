import axios from 'axios';

async function execute({ api, event, args }) {
  try {
    if (args.length === 0) {
      return api.sendMessage(this.config.guide.ar, event.threadID, event.messageID);
    }

    if (args[0] === "ØªÙˆÙ„ÙŠØ¯") {
      try {
        const response = await tempmailGet();
        const tempEmail = response.email;
        api.sendMessage(`ğŸ“®| Ø¨Ø±ÙŠØ¯ Ù…Ø¤Ù‚Øª \nâ”â”â”â”â”â”â”â”â”â”â”â”â”\n\nÙ‡Ø§ Ù‡Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:\n\nğŸ“| Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ\nâ¤ ${tempEmail}`, event.threadID, event.messageID);
      } catch (error) {
        console.error("âŒ | Ø®Ø·Ø£", error);
        api.sendMessage("âŒ| ØºÙŠØ± Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ ØªÙˆÙ„ÙŠØ¯ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§...", event.threadID, event.messageID);
      }
    } else if (args[0].toLowerCase() === "Ø§Ù„ÙˆØ§Ø±Ø¯Ø§Øª" && args.length === 2) {
      const email = args[1];
      try {
        const response = await tempmailInbox(email);
        const inboxMessages = response.map(({ sender, subject, message }) => 
          `ğŸ“| ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø¤Ù‚Øª\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nÙ‡Ø§ Ù‡ÙŠ Ø±Ø³Ø§Ø¦Ù„Ùƒ Ø§Ù„ÙˆØ§Ø±Ø¯Ø© ÙÙŠ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø¤Ù‚Øª:\n\nğŸ” Ù…Ù†\n${sender}\nğŸ“­ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹\nâ¤ ${subject || 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}\n\nğŸ“ Ø§Ù„Ø±Ø³Ø§Ù„Ø©\nâ¤ ${message}`).join('\n\n');
        api.sendMessage(inboxMessages, event.threadID, event.messageID);
      } catch (error) {
        console.error("ğŸ”´ Ø®Ø·Ø£", error);
        api.sendMessage("âŒ| Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹.", event.threadID, event.messageID);
      }
    } else {
      api.sendMessage("âŒ | Ø§Ø³ØªØ®Ø¯Ù… 'Ø¨Ø±ÙŠØ¯ ØªÙˆÙ„ÙŠØ¯' Ù„ØªÙˆÙ„ÙŠØ¯ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ùˆ 'Ø¨Ø±ÙŠØ¯ Ø§Ù„ÙˆØ§Ø±Ø¯Ø§Øª {Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ}' Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø©.", event.threadID, event.messageID);
    }

  } catch (error) {
    console.error(error);
    return api.sendMessage("Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.", event.threadID, event.messageID);
  }
}

export default {
  name: "Ø¨Ø±ÙŠØ¯",
  author:"Aryan", //converted by Hussein 
  role:"member",
  aliases:["tempmail"],
  description: "Ø£Ù…Ø± Ù„ØªÙˆÙ„ÙŠØ¯ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø¤Ù‚Øª ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø© ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¨Ø±ÙŠØ¯.",
  execute,
};
